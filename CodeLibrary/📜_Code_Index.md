# 人生OS 1.0 · Code Library (代码库目录)

此文档记录了 `CodeLibrary/` 文件夹下存储的所有脚本代码及其功能描述，作为系统自动化工具的索引。

---

## 📜 脚本索引

### 1. [archive_sleep_logs.py](file:///d:/个人记录/obsidian-file/wjmber/tasks/需求/CodeLibrary/archive_sleep_logs.py)
- **总功能**: 自动化归档睡眠相关的非结构化日志。
- **核心逻辑**:
    - **时间驱动**: 根据文件最后修改时间，将文件移动至对应的 `YYYY-MM` 归档文件夹。
    - **自动标签**: 
        - 注入父文件夹名（`#睡眠-非结构dao`）作为分类标签。
        - 扫描内容关键词（如压力、疲劳、认知等）并注入对应的主题标签。
- **应用场景**: 解决非结构化数据堆积问题，通过时间轴和标签化提高数据的可回溯性。

### 2. [general_archiver.py](file:///d:/个人记录\obsidian-file\wjmber\tasks\需求\CodeLibrary\general_archiver.py)
- **总功能**: 通用多目录 Markdown 归档工具。
- **核心逻辑**:
    - **多路径支持**: 同时扫描多个配置的源目录（如 `tasks`, `语言文字层` 等）。
    - **浅层扫描**: 仅处理根目录下的 `.md` 文件，保护子目录系统。
    - **双重标签**: 自动注入 `#目录名` 标签及基于内容的 `#语义` 标签。
- **应用场景**: 用于清理长期堆积在各处、未分类的碎片化 Markdown 笔记。

### 3. [workout_archiver.py](file:///d:/个人记录\obsidian-file\wjmber\tasks\需求\CodeLibrary\workout_archiver.py)
- **总功能**: 针对“锻炼&空间移动”目录的专项归档工具。
- **核心逻辑**:
    - **递归处理**: 自动扫描并处理所有子文件夹。
    - **创建时间驱动**: 使用文件的创建时间（ctime）进行归档。
    - **特定标签**: 强制为所有文件注入 `#锻炼` 标签，并保留父文件夹层级标签。
    - **移动机制**: 归档后自动清理源文件。
- **应用场景**: 专门处理具有高度相关性的运动与身体感受记录。

### 4. [camera_video_mover.py](file:///d:/个人记录/obsidian-file/wjmber/tasks/需求/CodeLibrary/camera_video_mover.py)
- **总功能**: 将相册目录中的所有视频文件剪切移动到 `H:\\2025` 进行集中存储。
- **核心逻辑**:
    - **目录扫描**: 支持仅当前目录或递归扫描子目录，过滤常见视频格式。
    - **安全预览**: 默认 DRY_RUN 仅打印计划移动清单，确认后才执行真实剪切。
    - **冲突处理**: 若目标目录存在同名文件，自动追加时间戳重命名避免覆盖。
    - **设备说明**: 对于 MTP 设备(如 `此电脑/Redmi K70/...`)，建议先手动复制到本地盘符再运行。
- **应用场景**: 快速清空手机相册视频、把视频集中整理到移动硬盘年度文件夹。

---

## 🛠️ 管理原则
1. **注释规范**: 每个脚本必须包含总功能注释块，说明脚本背景、输入输出及核心逻辑。
2. **索引同步**: 新增脚本后，必须同步更新此 `📜_Code_Index.md` 文档。
3. **安全第一**: 涉及文件删除的操作（如迁移）默认应先保留源文件，确认无误后再手动或通过参数执行清理。
